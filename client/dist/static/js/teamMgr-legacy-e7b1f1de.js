!function(){function e(e,i){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,i){if(!e)return;if("string"==typeof e)return t(e,i);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,i)}(e))||i&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var i=document.createElement("style");i.innerHTML="html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,menu,nav,output,ruby,section,summary,time,mark,audio,video,input{margin:0;padding:0;border:0;font-size:100%;font-weight:400;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,menu,nav,section{display:block}body{line-height:1}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:none}table{border-collapse:collapse;border-spacing:0}a{color:#7e8c8d;-webkit-backface-visibility:hidden;text-decoration:none}li{list-style:none}body{-webkit-text-size-adjust:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}body,html{line-height:1;font-family:PingFang SC,STHeitiSC-Light,Helvetica-Light,arial,sans-serif,Droid Sans Fallback;user-select:none;-webkit-tap-highlight-color:transparent}textarea{resize:none;outline:0}input,button{outline:0}.main-container,.app-container{padding:0 1px;background-color:#f9fafc}.teamItem{position:relative;height:66px;width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;border-bottom:1px solid rgba(10,10,10,.1)}.teamItem .teamItem-circle{height:44px;width:44px;line-height:44px;border-radius:22px;display:inline-block;text-align:center;color:#fff;font-size:20px;margin-left:24px}.teamItem .teamItem-name{margin-left:1rem;color:#354052;font-size:1rem}.teamItem .teamItem-owner{margin-right:24px}.teamItem .teamItem-owner>img{display:inline-block}.teamItem .teamItem-email{display:inline-block;margin-left:1rem;color:#aabad2;font-size:1rem}.teamItem .ctx-menu{list-style:none;background-color:#fff;-webkit-background-clip:padding-box;background-clip:padding-box;border:0px solid rgba(0,0,0,.15);border-radius:.25rem;-moz-box-shadow:0 0 5px #d5dfed;-webkit-box-shadow:0 0 5px #d5dfed;box-shadow:0 0 5px #d5dfed}.teamItem .ctx-menu .ctx-menu-container{-moz-box-shadow:0 5px 11px 0 #d5dfed,0 4px 15px 0 #d5dfed;-webkit-box-shadow:0 5px 11px 0 #d5dfed,0 4px 15px 0 #d5dfed;box-shadow:0 5px 11px #d5dfed,0 4px 15px #d5dfed}.teamItem .ctx-item{height:44px;line-height:44px}.teamItem .menu-item{color:#ff001f}.teamItem-owner-img{transition:all .3s ease-out}.header-background-red{background-color:#e25141}.header-background-green{background-color:#67ab5b}.header-background-orange{background-color:#f27338}.header-background-purple{background-color:#8f38aa}html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,menu,nav,output,ruby,section,summary,time,mark,audio,video,input{margin:0;padding:0;border:0;font-size:100%;font-weight:400;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,menu,nav,section{display:block}body{line-height:1}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:none}table{border-collapse:collapse;border-spacing:0}a{color:#7e8c8d;-webkit-backface-visibility:hidden;text-decoration:none}li{list-style:none}body{-webkit-text-size-adjust:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}body,html{line-height:1;font-family:PingFang SC,STHeitiSC-Light,Helvetica-Light,arial,sans-serif,Droid Sans Fallback;user-select:none;-webkit-tap-highlight-color:transparent}textarea{resize:none;outline:0}input,button{outline:0}.main-container,.app-container{padding:0 1px;background-color:#f9fafc}.teamItem{position:relative;height:66px;width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;border-bottom:1px solid rgba(10,10,10,.1)}.teamItem .teamItem-circle{height:44px;width:44px;line-height:44px;border-radius:22px;display:inline-block;text-align:center;color:#fff;font-size:20px;margin-left:24px}.teamItem .teamItem-name{margin-left:1rem;color:#354052;font-size:1rem}.teamItem .teamItem-email{display:inline-block;margin-left:1rem;color:#aabad2;font-size:1rem}.teamItem .right{margin-right:24px}html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,menu,nav,output,ruby,section,summary,time,mark,audio,video,input{margin:0;padding:0;border:0;font-size:100%;font-weight:400;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,menu,nav,section{display:block}body{line-height:1}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:none}table{border-collapse:collapse;border-spacing:0}a{color:#7e8c8d;-webkit-backface-visibility:hidden;text-decoration:none}li{list-style:none}body{-webkit-text-size-adjust:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}body,html{line-height:1;font-family:PingFang SC,STHeitiSC-Light,Helvetica-Light,arial,sans-serif,Droid Sans Fallback;user-select:none;-webkit-tap-highlight-color:transparent}textarea{resize:none;outline:0}input,button{outline:0}.main-container,.app-container{padding:0 1px;background-color:#f9fafc}.components-container{margin:30px 50px;position:relative}body{background:#F9FAFC;margin:0;padding:0}.nowrap{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.canwrap{word-wrap:break-word;word-break:normal}.button-style-main{padding:0;background:#229FFC;border-width:0px;outline:0;font-size:14px;color:#fff;height:48px;border-radius:24px}.button-style-border{padding:0;background:white;border:solid 1px #229FFC;outline:0;font-size:12px;color:#229ffc;height:48px;border-radius:24px;cursor:pointer}.elbutton-style{width:96px!important;height:36px!important;border:solid 1px #229FFC!important;color:#229ffc!important;background-color:#fff!important;padding:0!important;font-size:12px!important}.borderLine-input{height:24px;border-bottom:solid 1px #eee;padding:0 8px;box-sizing:border-box;font-size:14px;color:#354052}.teamMgr{position:relative;user-select:text}.teamMgr .header{height:108px;background-color:#fff;display:flex;flex-direction:row;justify-content:right;align-items:center}.teamMgr .header .right{margin-right:24px;height:40px}.teamMgr .card{width:100%;background-color:#fff;margin-top:12px;padding-left:24px;box-sizing:border-box}.teamMgr .card .el-tabs__item{padding:0 20px;height:48px;box-sizing:border-box;line-height:48px;display:inline-block;list-style:none;font-size:16px;font-weight:500;color:#303133;position:relative}.teamMgr .card .el-tabs__item:hover{color:#229ffc;cursor:pointer}.teamMgr .dialog-register .user-register-form .user-login-form-input{margin-top:48px}.teamMgr .el-input--medium{font-size:14px;margin-top:28px}.teamMgr .teamMgr-collection{padding-top:60px;background-color:#fff;height:100%}.teamMgr .teamMgr-content{width:66%;margin:auto;background-color:#fff}.teamMgr .teamMgr-content .teamMgr-group-header{height:72px;line-height:100px;display:flex;justify-content:flex-end;align-items:center}.teamMgr .teamMgr-content .teamMgr-group-header>img{margin-top:-72px;margin-right:24px;width:48px;height:48px;z-index:400;border-radius:24px;box-shadow:0 2px 12px #ccc}.teamMgr .teamMgr-content .teamMgr-group-footer{height:72px;border-bottom:1px dashed #d5dfed;text-align:center;display:flex}.teamMgr .teamMgr-content .teamMgr-group-footer div{background-color:#fff;color:#d5dfed;padding-top:62px;padding-left:10px;padding-right:10px;margin:auto;line-height:20px}.teamMgr .teamMgr-content .teamMgr-group-bottom{height:72px}\n",document.head.appendChild(i),System.register(["./index-legacy-4a2d7b10.js","./loginApi-legacy-49c701d3.js","./vueRouter-legacy-4ba05e21.js"],(function(t){"use strict";var i,n,o,r,a,s,c,l,u,d,p,f,m;return{setters:[function(e){i=e.p,n=e.q,o=e.s,e.m,r=e.o,a=e.n,s=e.f,c=e.t,l=e.w,u=e.x,d=e.y,p=e.z,f=e.A},function(e){m=e.r},function(){}],execute:function(){var h={exports:{}};h.exports=function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var i={};return t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=".",t(t.s=10)}([function(e,t,i){i(7);var n=i(5)(i(2),i(6),null,null);e.exports=n.exports},function(e,t,i){e.exports=function(e){function t(t){t.preventDefault(),"function"==typeof e&&e(t)}function i(e){27===e.keyCode&&t(e)}var n=!1;return{get isListening(){return n},start:function(e){window.addEventListener("click",t,!0),window.addEventListener("keyup",i,!0),n=!0,"function"==typeof e&&e()},stop:function(e){window.removeEventListener("click",t,!0),window.removeEventListener("keyup",i,!0),n=!1,"function"==typeof e&&e()}}}},function(e,t,i){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(i(1));t.default={name:"context-menu",props:{id:{type:String,default:"default-ctx"}},data:function(){var e=this;return{locals:{},align:"left",ctxTop:0,ctxLeft:0,ctxVisible:!1,bodyClickListener:(0,o.default)((function(t){if(e.ctxVisible&&!e.$el.contains(t.target)){if(1!==t.which)return t.preventDefault(),t.stopPropagation(),!1;e.ctxVisible=!1,e.$emit("ctx-cancel",e.locals),t.stopPropagation()}else e.ctxVisible=!1,e.$emit("ctx-close",e.locals)}))}},methods:{setPositionFromEvent:function(e){var t=this;e=e||window.event;var i=document.scrollingElement||document.documentElement;return e.pageX||e.pageY?(this.ctxLeft=e.pageX,this.ctxTop=e.pageY-i.scrollTop):(e.clientX||e.clientY)&&(this.ctxLeft=e.clientX+i.scrollLeft,this.ctxTop=e.clientY+i.scrollTop),this.$nextTick((function(){var e=t.$el,i=(e.style.minHeight||e.style.height).replace("px","")||32,n=(e.style.minWidth||e.style.width).replace("px","")||32,o=e.scrollHeight||i,r=e.scrollWidth||n,a=window.innerHeight-o-25,s=window.innerWidth-r-25;t.ctxTop>a&&(t.ctxTop=a),t.ctxLeft>s&&(t.ctxLeft=s)})),e},open:function(e,t){return this.ctxVisible&&(this.ctxVisible=!1),this.ctxVisible=!0,this.$emit("ctx-open",this.locals=t||{}),this.setPositionFromEvent(e),this.$el.setAttribute("tab-index",-1),this.bodyClickListener.start(),this}},watch:{ctxVisible:function(e,t){!0===t&&!1===e&&this.bodyClickListener.stop((function(e){}))}},computed:{ctxStyle:function(){return{display:this.ctxVisible?"block":"none",top:(this.ctxTop||0)+"px",left:(this.ctxLeft||0)+"px"}}}}},function(e,t,i){(e.exports=i(4)(void 0)).push([e.i,'.ctx{position:relative}.ctx-menu{position:absolute;top:100%;left:0;z-index:1000;display:none;float:left;min-width:160px;padding:5px 0;margin:2px 0 0;font-size:.9rem;color:#373a3c;text-align:left;list-style:none;background-color:#fff;-webkit-background-clip:padding-box;background-clip:padding-box;border:1px solid rgba(0,0,0,.15);border-radius:.25rem;-moz-box-shadow:0 0 5px #ccc;-webkit-box-shadow:0 0 5px #ccc;box-shadow:0 0 5px #ccc}.ctx-divider{height:1px;margin:.5rem 0;overflow:hidden;background-color:#e5e5e5}.ctx-item{display:block;padding:3px 20px;clear:both;font-weight:400;line-height:1.5;color:#373a3c;text-align:inherit;white-space:nowrap;background:none;border:0;cursor:default}.ctx-item:focus,.ctx-item:hover{color:#2b2d2f;text-decoration:none;background-color:#f5f5f5;cursor:normal}.ctx-item.active,.ctx-item.active:focus,.ctx-item.active:hover{color:#fff;text-decoration:none;background-color:#0275d8;outline:0}.ctx-item.disabled,.ctx-item.disabled:focus,.ctx-item.disabled:hover{color:#818a91}.ctx-item.disabled:focus,.ctx-item.disabled:hover{text-decoration:none;cursor:not-allowed;background-color:transparent;background-image:none;filter:"progid:DXImageTransform.Microsoft.gradient(enabled = false)"}.open>.ctx-menu{display:block}.open>a{outline:0}.ctx-menu-right{right:0;left:auto}.ctx-menu-left{right:auto;left:0}.ctx-header{display:block;padding:3px 20px;font-size:.9rem;line-height:1.5;color:#818a91;white-space:nowrap}.ctx-backdrop{position:fixed;top:0;right:0;bottom:0;left:0;z-index:990}.pull-right>.ctx-menu{right:0;left:auto}.ctx-menu-container{position:fixed;padding:0;border:1px solid #bbb;background-color:#f5f5f5;z-index:99999;box-shadow:0 5px 11px 0 rgba(0,0,0,.18),0 4px 15px 0 rgba(0,0,0,.15)}',""])},function(e,t){function i(e,t){var i=e[1]||"",o=e[3];if(!o)return i;if(t&&"function"==typeof btoa){var r=n(o),a=o.sources.map((function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"}));return[i].concat(a).concat([r]).join("\n")}return[i].join("\n")}function n(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=i(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,i){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},o=0;o<this.length;o++){var r=this[o][0];"number"==typeof r&&(n[r]=!0)}for(o=0;o<e.length;o++){var a=e[o];"number"==typeof a[0]&&n[a[0]]||(i&&!a[2]?a[2]=i:i&&(a[2]="("+a[2]+") and ("+i+")"),t.push(a))}},t}},function(e,t){e.exports=function(e,t,i,n){var o,r=e=e||{},a=typeof e.default;"object"!==a&&"function"!==a||(o=e,r=e.default);var s="function"==typeof r?r.options:r;if(t&&(s.render=t.render,s.staticRenderFns=t.staticRenderFns),i&&(s._scopeId=i),n){var c=s.computed||(s.computed={});Object.keys(n).forEach((function(e){var t=n[e];c[e]=function(){return t}}))}return{esModule:o,exports:r,options:s}}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"contextMenu",staticClass:"ctx-menu-container",style:e.ctxStyle,attrs:{id:e.id},on:{click:function(e){e.stopPropagation()},contextmenu:function(e){e.stopPropagation()}}},[i("div",{staticClass:"ctx open",staticStyle:{"background-color":"transparent"}},[i("ul",{staticClass:"ctx-menu",class:{"ctx-menu-right":"right"===e.align,"ctx-menu-left":"left"===e.align},attrs:{role:"menu"}},[e._t("default")],2)])])},staticRenderFns:[]}},function(e,t,i){var n=i(3);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals),i(8)("0df30a58",n,!0)},function(e,t,i){function n(e){for(var t=0;t<e.length;t++){var i=e[t],n=u[i.id];if(n){n.refs++;for(var o=0;o<n.parts.length;o++)n.parts[o](i.parts[o]);for(;o<i.parts.length;o++)n.parts.push(a(i.parts[o]));n.parts.length>i.parts.length&&(n.parts.length=i.parts.length)}else{var r=[];for(o=0;o<i.parts.length;o++)r.push(a(i.parts[o]));u[i.id]={id:i.id,refs:1,parts:r}}}}function o(e,t){for(var i=[],n={},o=0;o<t.length;o++){var r=t[o],a=r[0],s={css:r[1],media:r[2],sourceMap:r[3]};n[a]?(s.id=e+":"+n[a].parts.length,n[a].parts.push(s)):(s.id=e+":0",i.push(n[a]={id:a,parts:[s]}))}return i}function r(){var e=document.createElement("style");return e.type="text/css",d.appendChild(e),e}function a(e){var t,i,n=document.querySelector('style[data-vue-ssr-id~="'+e.id+'"]'),o=null!=n;if(o&&m)return h;if(g){var a=f++;n=p||(p=r()),t=s.bind(null,n,a,!1),i=s.bind(null,n,a,!0)}else n=n||r(),t=c.bind(null,n),i=function(){n.parentNode.removeChild(n)};return o||t(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;t(e=n)}else i()}}function s(e,t,i,n){var o=i?"":n.css;if(e.styleSheet)e.styleSheet.cssText=b(t,o);else{var r=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(r,a[t]):e.appendChild(r)}}function c(e,t){var i=t.css,n=t.media,o=t.sourceMap;if(n&&e.setAttribute("media",n),o&&(i+="\n/*# sourceURL="+o.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var l="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!l)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o=i(9),u={},d=l&&(document.head||document.getElementsByTagName("head")[0]),p=null,f=0,m=!1,h=function(){},g="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());e.exports=function(e,t,i){m=i;var r=o(e,t);return n(r),function(t){for(var i=[],a=0;a<r.length;a++){var s=r[a];(c=u[s.id]).refs--,i.push(c)}for(t?n(r=o(e,t)):r=[],a=0;a<i.length;a++){var c;if(0===(c=i[a]).refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete u[c.id]}}}};var b=function(){var e=[];return function(t,i){return e[t]=i,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports=function(e,t){for(var i=[],n={},o=0;o<t.length;o++){var r=t[o],a=r[0],s={id:e+":"+o,css:r[1],media:r[2],sourceMap:r[3]};n[a]?n[a].parts.push(s):i.push(n[a]={id:a,parts:[s]})}return i}},function(e,t,i){var n=i(0);n.install=function(e){return e.component("context-menu",n)},window.VueContextMenu=n,e.exports=e.exports.default=n}]);var g=r(h.exports),b=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"teamItem"},[i("div",[i("div",{staticClass:"teamItem-circle",class:e.color},[e._v(e._s(e.lastName))]),i("label",{staticClass:"teamItem-name"},[e._v(e._s(e.value.username))]),i("div",{staticClass:"teamItem-email"},[e._v("| "+e._s(e.value.email))])]),i("div",{staticClass:"teamItem-owner",on:{click:function(t){return t.stopPropagation(),e.roleAction.apply(null,arguments)}}},[i("label",[e._v(e._s(e.ownerString))]),i("img",{directives:[{name:"show",rawName:"v-show",value:e.isRole,expression:"isRole"}],staticClass:"teamItem-owner-img",style:e.iconStyle,attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAICAYAAAAvOAWIAAAAAXNSR0IArs4c6QAAAMpJREFUGBltjjEKwkAQRXc2S6LYWXgFBRU9gYWQI5hLaJVerNLaCB4iJ1ALCxF77Sy8gL2Iu+6MO5EEQ/zFDP/9v8OCcEp3l5X0vBlay7YkpZSw1q4nYX8qiQhc2mP4T+6IQMIOZxIASADOjTEPKb1Snz1zALXIyjyicHgUghKlyuWvpyQKuy53l3mwGrq21NpsfT/IPG/2zDPgBv+3ULo/t6WVBz+ot/TreUcPR9F4cM0LxWUGHBBSjAJvhO/4t5g/qOx0c2pWoAMfw1VIWiEuEbsAAAAASUVORK5CYII="}})]),i("context-menu",{ref:"ctxMenu",staticClass:"ctx-menu",on:{"ctx-cancel":e.onCtxClose,"ctx-close":e.onCtxClose}},[e.isManager||!e.isSelf?i("li",{staticClass:"ctx-item",on:{click:e.setRoleToManager}},[e._v("管理员")]):e._e(),e.isManager||!e.isSelf?i("li",{staticClass:"ctx-item",on:{click:e.setRoleToGuest}},[e._v("围观群众")]):e._e(),i("li",{staticClass:"ctx-item menu-item",on:{click:e.selected}},[e._v(e._s(e.lastItem))])])],1)},x={},v=a({props:{value:Object,isManager:!1,index:Number},data:function(){return{color:"header-background-red",isRole:!0,rotate:!1,isSelf:!1,showMenu:!1,align:"left"}},created:function(){this.valueChanged()},methods:{selected:function(){this.$emit("select",this.index),this.showMenu=!1},roleAction:function(){this.isRole&&(this.rotate=!this.rotate,this.$refs.ctxMenu.open(),this.showMenu=!0)},setRoleToManager:function(){this.roleModify("manager"),this.showMenu=!1},setRoleToGuest:function(){this.roleModify("guest"),this.showMenu=!1},roleModify:function(e){var t=this,i=this.value.uid,o=e;(function(e,t,i){var o="api/collaborator/".concat(e,"/role");return n(o,{memberId:t,role:i})})(s.getCurApp()._id,i,o).then((function(e){t.$message({message:e.message,type:e.success?"success":"error"}),t.$emit("roleUpdate")}))},onCtxClose:function(){this.showMenu=!1},valueChanged:function(){var e=Math.floor(Math.random()*Math.floor(4));console.log(this.value),console.log(c()),this.isSelf=c()===this.value.uid,this.isRole=(this.isManager||this.isSelf)&&"owner"!==this.value.role,this.color=["header-background-red","header-background-green","header-background-orange","header-background-purple"][e]}},computed:{lastName:function(){var e=this.value.username.length;return this.value.username.substring(e-1)},ownerString:function(){switch(this.value.role){case"owner":return"创建者";case"manager":return"管理员";default:return"围观群众"}},lastItem:function(){return this.isSelf?"离开该团队":"移除该队员"},iconStyle:function(){return this.showMenu?{transform:"rotate(180deg)"}:{transform:"rotate(0deg)"}}},watch:{value:function(){this.valueChanged()}},components:{contextMenu:g}},b,[],!1,w,null,null,null);function w(e){for(var t in x)this[t]=x[t]}var y=function(){return v.exports}(),k={},M=a({props:{account:Object},data:function(){return{color:"header-background-red"}},methods:{resetPassword:function(){this.$emit("resetPassword")},deleteAccount:function(){this.$emit("deleteAccount")}},computed:{lastName:function(){var e=this.account.username.length;return this.account.username.substring(e-1)}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"teamItem"},[i("div",[i("div",{staticClass:"teamItem-circle",class:e.color},[e._v(e._s(e.lastName))]),i("label",{staticClass:"teamItem-name"},[e._v(e._s(e.account.username))]),i("div",{staticClass:"teamItem-email"},[e._v("| "+e._s(e.account.email))])]),"root"!=e.account.permission?i("div",{staticClass:"right"},[i("el-button",{attrs:{type:"info",plain:""},on:{click:e.resetPassword}},[e._v("重置密码")]),i("el-button",{attrs:{type:"danger",plain:""},on:{click:e.deleteAccount}},[e._v("注销账号")])],1):e._e(),"root"==e.account.permission?i("div",{staticClass:"right"},[e._v("超级管理员")]):e._e()])}),[],!1,C,null,null,null);function C(e){for(var t in k)this[t]=k[t]}var _={},I=a({data:function(){return{members:[],accounts:[],isShowRegister:!1,isShowResetPassword:!1,isShowInvite:!1,dialogVisible:!1,isManager:!1,currentIndex:-1,message:"",invitedEmails:"",isOwner:!1,dissolveShow:!1,createTeamVisible:!1,username:"",password:"",email:"",showLoading:!1,form:{name:""},account:{},newPassword:"",curApp:s.getCurApp(),user:l()}},mounted:function(){var e=this;this.user=l(),this.requestMembers(),this.bus.$on("refreshList",(function(){e.requestMembers()})),"root"==this.user.permission&&(this.requestAccounts(),this.bus.$on("refreshAccounts",(function(){e.requestAccounts()})))},destroyed:function(){this.bus.$off("refreshList")},computed:{},methods:{showMenu:function(){this.$refs.ctxMenu.open()},addClick:function(){this.isShowInvite=!0},registerClick:function(){this.isShowRegister=!0},sendRegister:function(){var e=this;if(0!==this.username.length)if(0!==this.email.length)if(u.valideEmail(this.email))if(0!==this.password.length){var t={username:this.username,password:this.password,email:this.email};this.showLoading=!0,m(t).then((function(t){e.showLoading=!1,console.log(t),e.$message({message:"注册成功",type:"success"}),setTimeout((function(){e.requestAccounts()}),500)}),(function(t){e.showLoading=!1}))}else this.$message.error("密码不能为空");else this.$message.error("邮箱格式错误");else this.$message.error("邮箱不能为空");else this.$message.error("用户名不能为空")},sendInvite:function(){this.isShowInvite=!1;var t,i=[],n=e(this.invitedEmails.split(" "));try{for(n.s();!(t=n.n()).done;){var o=t.value;if(this.checkEmail(o)){var r=o.replace(/[\r\n]/g,"");i.push(r)}}}catch(a){n.e(a)}finally{n.f()}i.length>0?this.request(i):this.$message.error("请输入正确的邮箱"),console.log(i)},itemSelected:function(e){this.currentIndex=e;var t=c(),i=this.members[this.currentIndex].uid,n=this.members.filter((function(e){return e.uid===c()}))[0].role;t===i&&"owner"===n||(this.stateUpdate(),this.dialogVisible=!0)},deleteMember:function(){var e=this;if(this.dialogVisible=!1,this.currentIndex>=0){var t=this.members[this.currentIndex].uid;(function(e,t){var i="api/collaborator/".concat(e,"/member/").concat(t);return o(i)})(this.curApp._id,t).then((function(t){e.$message({message:t.message,type:t.success?"success":"error"}),t.success&&e.requestMembers()}))}},stateUpdate:function(){var e=this;if(this.currentIndex>=0){this.user=l();var t=this.members.filter((function(t){return t.uid===e.user._id}))[0].role,i=this.members[this.currentIndex].username,n=c()===this.members[this.currentIndex].uid;switch(t){case"owner":case"manager":this.message="确定要移除"+i+"吗?",this.isManager=!0;break;default:this.message=n?"确定要离开该团队吗?":"围观群众权限无法使用该功能，可联系项目创建者修改权限哦",this.isManager=n}}},deleteAccount:function(e){var t=this;this.$confirm("确认注销".concat(e.username,"？")).then((function(){d(e._id).then((function(e){t.$message.success("注销成功"),t.requestAccounts()}),(function(e){t.$message.error(e)}))})).catch((function(){}))},resetPassword:function(e){this.account=e,this.isShowResetPassword=!0},resetPasswordRequest:function(){var e=this;this.showLoading=!0,p(this.account._id,this.newPassword).then((function(t){e.$message.success("重置成功"),e.showLoading=!1,e.isShowResetPassword=!1,e.requestAccounts()}),(function(t){e.showLoading=!1,e.$message.error(t)}))},request:function(e){var t,i,o,r,a=this;(t=this.curApp._id,i=e,o={emailList:i,role:"guest"},r="api/collaborator/".concat(t,"/invite"),n(r,o)).then((function(e){e.success&&(a.$message({message:e.message,type:"success"}),a.requestMembers())}))},requestMembers:function(){var e,t,n=this;(e=this.curApp._id,t="api/collaborator/".concat(e,"/members"),i(t)).then((function(e){n.members=e.data}))},requestAccounts:function(){var e=this;f().then((function(t){e.accounts=t.data}))},checkEmail:function(e){return/\S+@\S+\.\S+/.test(e)}},components:{MemberItem:function(){return M.exports}(),Item:y,contextMenu:g},directives:{focus:{update:function(e,t){t.value&&e.focus()}}},watch:{members:function(){var e=this.members.filter((function(e){return e.uid===c()}));e&&e.length>0&&(this.isOwner="owner"===e[0].role)}}},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"teamMgr"},[i("div",{staticClass:"header"},[i("div",{staticClass:"right"},[i("el-button",{attrs:{type:"primary"},on:{click:e.addClick}},[e._v(" 添加新成员 ")]),"root"==e.user.permission?i("el-button",{attrs:{type:"primary",plain:""},on:{click:e.registerClick}},[e._v(" 注册新账号 ")]):e._e()],1)]),i("el-tabs",{staticClass:"card"},[i("el-tab-pane",[i("span",{attrs:{slot:"label"},slot:"label"},[e._v("项目成员")]),i("div",{staticClass:"teamMgr-collection"},[i("div",{staticClass:"teamMgr-content"},[e._l(e.members,(function(t,n){return i("item",{key:n,attrs:{"is-manager":e.isOwner,index:n},on:{select:e.itemSelected,roleUpdate:e.requestMembers},model:{value:e.members[n],callback:function(t){e.$set(e.members,n,t)},expression:"members[index]"}})})),i("div",{staticClass:"teamMgr-group-footer"},[i("div",[e._v(" 共 "+e._s(e.members.length)+" 名成员")])]),i("div",{staticClass:"teamMgr-group-bottom"})],2)])]),"root"==e.user.permission?i("el-tab-pane",[i("span",{attrs:{slot:"label"},slot:"label"},[e._v("账号管理")]),i("div",{staticClass:"teamMgr-collection"},[i("div",{staticClass:"teamMgr-content"},[e._l(e.accounts,(function(t,n){return i("member-item",{key:n,attrs:{index:n,account:t},on:{deleteAccount:function(i){return e.deleteAccount(t)},resetPassword:function(i){return e.resetPassword(t)}}})})),i("div",{staticClass:"teamMgr-group-footer"},[i("div",[e._v(" 共 "+e._s(e.accounts.length)+" 名成员")])]),i("div",{staticClass:"teamMgr-group-bottom"})],2)])]):e._e()],1),i("el-dialog",{attrs:{title:"重置密码",visible:e.isShowResetPassword,width:"30%","append-to-body":!0,center:""},on:{"update:visible":function(t){e.isShowResetPassword=t}}},[i("div",[i("p",{staticStyle:{"margin-bottom":"20px","font-size":"16px"}},[e._v(e._s(this.account.username))]),i("el-input",{staticClass:"user-login-form-input",attrs:{type:"text",placeholder:"请输入密码","prefix-icon":"icon-ic_pswd"},model:{value:e.newPassword,callback:function(t){e.newPassword=t},expression:"newPassword"}})],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isShowResetPassword=!1}}},[e._v("取 消")]),i("el-button",{attrs:{loading:e.showLoading,type:"primary"},on:{click:e.resetPasswordRequest}},[e._v("确 定")])],1)]),i("el-dialog",{staticClass:"dialog-register",attrs:{title:"注册新账号",visible:e.isShowRegister,width:"30%","append-to-body":!0,center:""},on:{"update:visible":function(t){e.isShowRegister=t}}},[i("div",{staticClass:"user-register-form"},[i("el-input",{staticClass:"user-login-form-input",attrs:{type:"text",placeholder:"请输入用户名","prefix-icon":"icon-ic_name"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),i("el-input",{staticClass:"user-login-form-input",staticStyle:{"margin-top":"24px"},attrs:{placeholder:"请输入邮箱",type:"email","prefix-icon":"icon-ic_email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),i("el-input",{staticClass:"user-login-form-input",staticStyle:{"margin-top":"24px"},attrs:{placeholder:"请输入密码",type:"password","prefix-icon":"icon-ic_pswd"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isShowRegister=!1}}},[e._v("取 消")]),i("el-button",{attrs:{loading:e.showLoading,type:"primary"},on:{click:e.sendRegister}},[e._v("确 定")])],1)]),i("el-dialog",{attrs:{title:"邀请成员",visible:e.isShowInvite,width:"30%","append-to-body":!0,center:""},on:{"update:visible":function(t){e.isShowInvite=t}}},[i("el-input",{attrs:{placeholder:"多个邮箱使用空格分开",rows:10,type:"textarea"},model:{value:e.invitedEmails,callback:function(t){e.invitedEmails=t},expression:"invitedEmails"}}),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.isShowInvite=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.sendInvite}},[e._v("确 定")])],1)],1),i("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,"append-to-body":!0,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("span",[e._v(e._s(e.message))]),e.isManager?i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.deleteMember}},[e._v("确 定")])],1):e._e()])],1)}),[],!1,S,null,null,null);function S(e){for(var t in _)this[t]=_[t]}t("default",function(){return I.exports}())}}}))}();
